# Enable the Rewrite Engine
RewriteEngine On

# Redirect www to non-www
RewriteCond %{HTTP_HOST} ^www\.(.+)$ [NC]
RewriteRule ^ https://%1%{REQUEST_URI} [R=301,L]

# Redirect old blog pages to the home page
Redirect 301 /blog/about /
Redirect 301 /blog/services /
Redirect 301 /blog/contact /
Redirect 301 /blog/2 /
Redirect 301 /blog/0 /
Redirect 301 /blog/1 /
Redirect 301 /blog/3 /
Redirect 301 /blog/blogs /
Redirect 301 /blog/packages /
Redirect 301 /blog/properties /
Redirect 301 /blog/gallery /
Redirect 301 /blog/careers /

# Rule 1: Redirect blog/slug to blog_detail.php
RewriteRule ^blog/([a-zA-Z0-9-]+)/?$ blog_detail.php?slug=$1 [L,QSA]

# Rule 2: Redirect URLs with .php to extensionless versions
RewriteCond %{THE_REQUEST} \s/([^.]+)\.php[?\s] [NC]
RewriteRule ^ %1 [R=301,L]

# Rule 3: Serve the .php file when the extension is omitted
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}.php -f
RewriteRule ^(.*)$ $1.php [L]
